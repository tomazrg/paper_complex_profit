"0","es <- hyb_diff %>%"
"0","  rowwise() %>%"
"0","  mutate(sev_sum_check = sum(c_across(all_of(paste0(diseases, ""_check""))), na.rm = TRUE)) %>%"
"0","  ungroup() %>%"
"0","  group_by(trial, year, location, season) %>%"
"0","  summarise("
"0","    yi        = mean(d_yld, na.rm = TRUE),"
"0","    vi        = var(d_yld, na.rm = TRUE) / sum(!is.na(d_yld)),"
"0","    m_hybrids = sum(!is.na(d_yld)),"
"0","    sev_sum   = mean(sev_sum_check, na.rm = TRUE),"
"0","    .groups   = ""drop"""
"0","  ) %>%"
"0","  mutate("
"0","    pressure = factor("
"0","      ifelse(sev_sum > thr_present, ""Disease present (>2%)"", ""Disease absent (â‰¤2%)""),"
"0","      levels = c(""Disease absent (â‰¤2%)"", ""Disease present (>2%)"")"
"0","    )"
"0","  ) %>%"
"0","  filter(is.finite(vi), vi > 0, m_hybrids >= 2)"
